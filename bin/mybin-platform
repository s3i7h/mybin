#!/usr/bin/env bash

lower='tr [A-Z] [a-z]'

arch=$(uname -m | $lower)
arch_like="unknown"
kernel=$(uname -s | $lower)
_version=$(uname -rv | $lower)
os="unknown"
like="unknown"
distro="unknown"
shell=$(basename $SHELL | $lower)

case $arch in
    *x86_64*|*amd64*|*x64*) arch_like=x64;;
esac

case $kernel in
    *darwin*) os="macos";;
    *linux*)
        case $_version in
            *wsl*) kernel="${kernel}#wsl"
        esac
        case $(uname -o | $lower) in
            *gnu*) os="gnu";;
        esac
        release=$([ -e /etc/os-release ] && cat /etc/os-release) 
        case $(echo $release | grep ID_LIKE=) in
            *debian*) like="debian";;
        esac
        case $(echo $release | grep ID=) in
            *ubuntu*) distro="ubuntu";;
        esac
esac

echo ${arch}:${arch_like}:${kernel}:${os}:${like}:${distro}:${shell}
